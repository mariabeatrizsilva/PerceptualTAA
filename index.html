<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAA Quality Analysis Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            color: #666;
            font-size: 1.1em;
        }

        nav {
            background: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .nav-section {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-divider {
            width: 2px;
            background: #e0e0e0;
            margin: 0 10px;
        }

        button {
            padding: 12px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        button.active {
            background: #764ba2;
            box-shadow: 0 4px 8px rgba(118, 75, 162, 0.3);
        }

        .content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .explanation {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .explanation h2 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        .explanation p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .explanation ul {
            margin-left: 20px;
            color: #555;
            line-height: 1.8;
        }

        .explanation .key-insight {
            background: #fff3cd;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
            border-left: 4px solid #ffc107;
        }

        .explanation .key-insight strong {
            color: #856404;
        }

        .plot-container {
            width: 100%;
            height: 700px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }

        .plot-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .loading {
            text-align: center;
            padding: 50px;
            color: #666;
        }

        .error {
            background: #fee;
            color: #c33;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #c33;
        }

        @media (max-width: 768px) {
            nav {
                flex-direction: column;
            }
            
            .nav-divider {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé¨ TAA Quality Analysis Dashboard</h1>
            <p class="subtitle">Interactive exploration of video features vs perceptual quality scores</p>
        </header>

        <nav>
            <div class="nav-section">
                <button onclick="showPlot('overview')" class="active" id="btn-overview">üìä Overview</button>
                <button onclick="showPlot('correlation')" id="btn-correlation">üî• Correlation Heatmap</button>
                <button onclick="showPlot('top_features')" id="btn-top_features">‚≠ê Top Features</button>
            </div>
            
            <div class="nav-divider"></div>
            
            <div class="nav-section">
                <button onclick="showPlot('flow_mean')" id="btn-flow_mean">üèÉ Motion Magnitude</button>
                <button onclick="showPlot('flow_std')" id="btn-flow_std">üìà Motion Variability</button>
                <button onclick="showPlot('temporal_activity')" id="btn-temporal_activity">‚è±Ô∏è Temporal Activity</button>
            </div>
            
            <div class="nav-divider"></div>
            
            <div class="nav-section">
                <button onclick="showPlot('edge_density')" id="btn-edge_density">üî≤ Edge Density</button>
                <button onclick="showPlot('texture_variance')" id="btn-texture_variance">üé® Texture Detail</button>
                <button onclick="showPlot('high_freq_energy')" id="btn-high_freq_energy">‚ú® Fine Detail</button>
            </div>
            
            <div class="nav-divider"></div>
            
            <div class="nav-section">
                <button onclick="showPlot('brightness')" id="btn-brightness">üí° Brightness</button>
                <button onclick="showPlot('contrast')" id="btn-contrast">‚ö´‚ö™ Contrast</button>
            </div>
        </nav>

        <div class="content">
            <div id="plot-content">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <script>
        const plotExplanations = {
            overview: {
                title: 'Welcome to the TAA Quality Analysis Dashboard',
                description: `
                    <p>This dashboard helps you understand which video properties correlate with perceptual quality (CGVQM scores) in TAA-rendered scenes.</p>
                    
                    <p><strong>Your Dataset:</strong></p>
                    <ul>
                        <li>23 scene walkthroughs (excluding oldmine-warm due to inconsistent scores)</li>
                        <li>~35 TAA parameter variations per scene</li>
                        <li>CGVQM scores comparing each TAA variation to 16xSSAA reference</li>
                        <li>Manual labels for motion, complexity, lighting, vegetation, etc.</li>
                        <li>Computed video features: optical flow, edge density, texture, etc.</li>
                    </ul>
                    
                    <p><strong>How to Use:</strong></p>
                    <ul>
                        <li>Click the buttons above to explore different video features</li>
                        <li>Hover over points in the plots to see scene names and details</li>
                        <li>Look for negative correlations (features that hurt quality)</li>
                        <li>Look for positive correlations (features that improve quality)</li>
                    </ul>
                    
                    <div class="key-insight">
                        <strong>üéØ Goal:</strong> Understand why some scenes maintain higher quality than others under TAA degradation, and identify optimal TAA parameters for different scene types.
                    </div>
                `,
                plot: null
            },
            correlation: {
                title: 'Correlation Heatmap',
                description: `
                    <p><strong>What this shows:</strong> Correlations between all video features and quality metrics.</p>
                    
                    <p><strong>How to read it:</strong></p>
                    <ul>
                        <li><span style="color: #0000ff;">Blue = Positive correlation</span> (feature increases ‚Üí quality increases)</li>
                        <li><span style="color: #ff0000;">Red = Negative correlation</span> (feature increases ‚Üí quality decreases)</li>
                        <li>Stronger colors = stronger correlations</li>
                        <li>Numbers show correlation coefficients (-1 to +1)</li>
                    </ul>
                    
                    <div class="key-insight">
                        <strong>üí° Look for:</strong> Strong red values indicate features that significantly hurt quality (e.g., high motion, high texture complexity).
                    </div>
                `,
                plot: 'interactive_correlation_heatmap.html'
            },
            top_features: {
                title: 'Top 4 Most Correlated Features',
                description: `
                    <p><strong>What this shows:</strong> The four video features with the strongest correlations to quality, displayed side-by-side.</p>
                    
                    <p><strong>Why it matters:</strong> These are the most important properties that predict whether a scene will maintain quality under TAA.</p>
                    
                    <ul>
                        <li>Points are colored by motion speed</li>
                        <li>Red dashed line shows the trend</li>
                        <li>Hover to see scene names</li>
                    </ul>
                    
                    <div class="key-insight">
                        <strong>üîç Insight:</strong> Scenes that are high on these features are likely to have lower quality scores. Use this to predict which new scenes will be challenging for TAA.
                    </div>
                `,
                plot: 'interactive_top_features.html'
            },
            flow_mean: {
                title: 'Motion Magnitude (Optical Flow)',
                description: `
                    <p><strong>What this measures:</strong> Average optical flow magnitude - the overall amount of pixel movement between frames.</p>
                    
                    <p><strong>What it means:</strong></p>
                    <ul>
                        <li><strong>High values (15-30+):</strong> Fast camera motion, rapid pans</li>
                        <li><strong>Medium values (5-15):</strong> Moderate camera movement</li>
                        <li><strong>Low values (<5):</strong> Slow or static camera</li>
                    </ul>
                    
                    <p><strong>TAA Impact:</strong> High motion can cause motion blur and ghosting artifacts in TAA, potentially reducing perceived quality.</p>
                    
                    <div class="key-insight">
                        <strong>üéØ Hypothesis:</strong> Scenes with higher motion magnitude will have lower CGVQM scores due to TAA's temporal blending struggling with fast motion.
                    </div>
                `,
                plot: 'interactive_flow_mean_avg.html'
            },
            flow_std: {
                title: 'Motion Variability',
                description: `
                    <p><strong>What this measures:</strong> Standard deviation of optical flow - how much motion varies across the video.</p>
                    
                    <p><strong>What it means:</strong></p>
                    <ul>
                        <li><strong>High values:</strong> Erratic, inconsistent motion (quick starts/stops, chaotic camera)</li>
                        <li><strong>Low values:</strong> Smooth, consistent motion (steady pans, gentle movements)</li>
                    </ul>
                    
                    <p><strong>TAA Impact:</strong> Variable motion is harder for TAA to predict and stabilize, potentially causing more artifacts than smooth motion.</p>
                    
                    <div class="key-insight">
                        <strong>üí° Insight:</strong> Even if average motion is moderate, high variability can still hurt quality because TAA can't adapt smoothly.
                    </div>
                `,
                plot: 'interactive_flow_std_avg.html'
            },
            temporal_activity: {
                title: 'Temporal Activity',
                description: `
                    <p><strong>What this measures:</strong> Average frame-to-frame pixel differences - how much the scene changes over time.</p>
                    
                    <p><strong>What it means:</strong></p>
                    <ul>
                        <li><strong>High values:</strong> Rapidly changing scene (fast motion, lighting changes, dynamic content)</li>
                        <li><strong>Low values:</strong> Stable scene (minimal changes between frames)</li>
                    </ul>
                    
                    <p><strong>TAA Impact:</strong> High temporal activity stresses TAA's temporal blending, as it relies on previous frames to reduce aliasing.</p>
                    
                    <div class="key-insight">
                        <strong>‚ö†Ô∏è Note:</strong> This is related to but different from optical flow - it captures all visual changes, not just motion (e.g., flickering lights, particle effects).
                    </div>
                `,
                plot: 'interactive_temporal_activity_avg.html'
            },
            edge_density: {
                title: 'Edge Density (Geometric Complexity)',
                description: `
                    <p><strong>What this measures:</strong> Proportion of pixels that are edges - indicates geometric complexity and detail.</p>
                    
                    <p><strong>What it means:</strong></p>
                    <ul>
                        <li><strong>High values (>0.25):</strong> Complex geometry, lots of objects, detailed architecture</li>
                        <li><strong>Low values (<0.15):</strong> Simple scenes, smooth surfaces, minimal geometric detail</li>
                    </ul>
                    
                    <p><strong>TAA Impact:</strong> Edges are where temporal aliasing artifacts (crawling, shimmering) are most visible. More edges = more potential for visible artifacts.</p>
                    
                    <div class="key-insight">
                        <strong>üéØ Key Finding:</strong> High edge density scenes often show lower quality because TAA must work harder to stabilize many fine geometric features.
                    </div>
                `,
                plot: 'interactive_edge_density_avg.html'
            },
            texture_variance: {
                title: 'Texture Variance (Surface Detail)',
                description: `
                    <p><strong>What this measures:</strong> Laplacian variance - captures fine surface detail and texture richness.</p>
                    
                    <p><strong>What it means:</strong></p>
                    <ul>
                        <li><strong>High values (>1500):</strong> Highly textured surfaces (wood grain, foliage, rough stone)</li>
                        <li><strong>Low values (<500):</strong> Smooth surfaces (clean walls, sky, simple materials)</li>
                    </ul>
                    
                    <p><strong>TAA Impact:</strong> Fine textures can cause temporal instability - they may appear to "boil" or shimmer as TAA blends slightly different texture samples across frames.</p>
                    
                    <div class="key-insight">
                        <strong>üåø Example:</strong> Foliage scenes (lightfoliage, lightfoliage-close) typically have very high texture variance and may show lower quality.
                    </div>
                `,
                plot: 'interactive_texture_variance_avg.html'
            },
            high_freq_energy: {
                title: 'High-Frequency Energy (Fine Detail)',
                description: `
                    <p><strong>What this measures:</strong> Energy in high spatial frequencies - captures sharp details, fine patterns, and small features.</p>
                    
                    <p><strong>What it means:</strong></p>
                    <ul>
                        <li><strong>High values:</strong> Sharp, detailed content (fine patterns, text, intricate details)</li>
                        <li><strong>Low values:</strong> Blurry or smooth content (out-of-focus areas, large flat surfaces)</li>
                    </ul>
                    
                    <p><strong>TAA Impact:</strong> TAA inherently blurs content through temporal averaging. High-frequency details are most affected by this blur.</p>
                    
                    <div class="key-insight">
                        <strong>‚ö° Trade-off:</strong> TAA reduces aliasing but also blurs fine details. Scenes with high-frequency content may show this trade-off most clearly.
                    </div>
                `,
                plot: 'interactive_high_freq_energy.html'
            },
            brightness: {
                title: 'Brightness',
                description: `
                    <p><strong>What this measures:</strong> Average pixel intensity (0 = black, 255 = white).</p>
                    
                    <p><strong>What it means:</strong></p>
                    <ul>
                        <li><strong>High values (>150):</strong> Bright scenes (outdoor, well-lit interiors)</li>
                        <li><strong>Medium values (80-150):</strong> Moderately lit scenes</li>
                        <li><strong>Low values (<80):</strong> Dark scenes (nighttime, dim interiors)</li>
                    </ul>
                    
                    <p><strong>TAA Impact:</strong> Dark scenes may hide TAA artifacts better (human vision is less sensitive in low light), potentially showing higher quality scores.</p>
                    
                    <div class="key-insight">
                        <strong>üåô Hypothesis:</strong> Darker scenes might maintain higher quality not because TAA works better, but because artifacts are less visible.
                    </div>
                `,
                plot: 'interactive_brightness_avg.html'
            },
            contrast: {
                title: 'Contrast',
                description: `
                    <p><strong>What this measures:</strong> Standard deviation of pixel intensities - indicates the dynamic range of the scene.</p>
                    
                    <p><strong>What it means:</strong></p>
                    <ul>
                        <li><strong>High values (>60):</strong> Wide range from very dark to very bright areas</li>
                        <li><strong>Low values (<40):</strong> Flat, uniform lighting with limited range</li>
                    </ul>
                    
                    <p><strong>TAA Impact:</strong> High-contrast areas (e.g., bright highlights against dark shadows) may make TAA artifacts more visible.</p>
                    
                    <div class="key-insight">
                        <strong>üé® Note:</strong> Contrast interacts with other features - high contrast + high motion may be particularly challenging for TAA.
                    </div>
                `,
                plot: 'interactive_contrast_avg.html'
            }
        };

        function showPlot(plotName) {
            // Update active button
            document.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`btn-${plotName}`).classList.add('active');

            const info = plotExplanations[plotName];
            const contentDiv = document.getElementById('plot-content');

            // Build the explanation
            let html = `
                <div class="explanation">
                    <h2>${info.title}</h2>
                    ${info.description}
                </div>
            `;

            // Add plot if available
            if (info.plot) {
                html += `
                    <div class="plot-container">
                        <iframe src="${info.plot}" onload="this.style.opacity=1" style="opacity:0;transition:opacity 0.3s"></iframe>
                    </div>
                `;
            }

            contentDiv.innerHTML = html;
        }

        // Show overview on load
        window.onload = function() {
            showPlot('overview');
        };
    </script>
</body>
</html>